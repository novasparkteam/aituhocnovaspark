<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>ƒê√°nh Gi√° NƒÉng L·ª±c T·ª± H·ªçc ‚Äî Nova Spark</title>
    <meta name="description"
        content="B·ªô c√¢u h·ªèi ƒë√°nh gi√° nƒÉng l·ª±c t·ª± h·ªçc d√†nh cho h·ªçc sinh THPT ‚Äî radar chart, g·ª£i √Ω c√° nh√¢n h√≥a.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <link rel="stylesheet" href="nova-spark.css">
    <script>tailwind.config = { darkMode: 'class', theme: { extend: { fontFamily: { sans: ['Quicksand', 'sans-serif'] }, colors: { 'ns-purple': '#7c5cfc', 'ns-purple-light': '#a78bfa', 'ns-purple-soft': '#ede9fe', 'dark-text': '#5A4A4A' } } } }</script>
    <script src="nova-spark.js"></script>
</head>

<body class="relative min-h-screen pb-20 font-sans text-dark-text dark:text-gray-100">

    <div class="blob bg-purple-100 w-[500px] h-[500px] rounded-full top-[-100px] right-[-150px] animate-float"></div>

    <button onclick="toggleTheme()"
        class="fixed bottom-8 right-8 z-[60] bg-white dark:bg-slate-800 w-14 h-14 rounded-full shadow-2xl flex items-center justify-center text-yellow-500 border-4 border-white dark:border-slate-700 hover:scale-110 transition-all">
        <i class="ph-fill ph-sun text-2xl dark:hidden"></i><i
            class="ph-fill ph-moon text-2xl text-blue-300 hidden dark:block"></i>
    </button>

    <nav class="p-4 sm:p-6 sticky top-0 z-50" id="navbar">
        <div class="max-w-6xl mx-auto flex justify-between items-center glass-card px-6 py-3 rounded-full">
            <a href="index.html"
                class="flex items-center gap-2 text-gray-500 hover:text-ns-purple transition-colors font-bold group"><i
                    class="ph-bold ph-arrow-left group-hover:-translate-x-1 transition-transform"></i> Trang ch·ªß</a>
            <div class="font-bold text-lg text-ns-purple flex items-center gap-2"><i class="ph-fill ph-exam"></i><span
                    class="hidden sm:inline">ƒê√°nh Gi√° T·ª± H·ªçc</span></div>
            <a href="giaiphap.html"
                class="text-sm font-bold text-gray-500 hover:text-ns-purple transition-colors hidden md:block">Gi·∫£i ph√°p
                <i class="ph-bold ph-arrow-right"></i></a>
        </div>
    </nav>

    <!-- Intro Screen -->
    <div id="screen-intro" class="max-w-3xl mx-auto px-4 mt-12 text-center">
        <div class="glass-card p-10 sm:p-16 rounded-[3rem] reveal">
            <i class="ph-duotone ph-exam text-7xl text-ns-purple mb-6"></i>
            <h1 class="text-3xl md:text-5xl font-extrabold dark:text-white mb-4 leading-tight">ƒê√°nh Gi√° <span
                    class="text-ns-purple italic">NƒÉng L·ª±c T·ª± H·ªçc</span></h1>
            <p class="text-gray-500 dark:text-gray-400 text-lg mb-8 max-w-xl mx-auto">20 c√¢u h·ªèi ‚Äî ~5 ph√∫t. Kh√°m ph√°
                ƒëi·ªÉm m·∫°nh, ƒëi·ªÉm c·∫ßn c·∫£i thi·ªán, v√† nh·∫≠n g·ª£i √Ω ph∆∞∆°ng ph√°p ph√π h·ª£p.</p>
            <div class="space-y-3 text-left max-w-md mx-auto mb-8 text-sm text-gray-500">
                <div class="flex items-center gap-3"><i class="ph-fill ph-check-circle text-green-500"></i> Kh√¥ng c√≥ c√¢u
                    tr·∫£ l·ªùi ƒë√∫ng/sai</div>
                <div class="flex items-center gap-3"><i class="ph-fill ph-check-circle text-green-500"></i> K·∫øt qu·∫£ ƒë∆∞·ª£c
                    l∆∞u tr√™n thi·∫øt b·ªã c·ªßa b·∫°n</div>
                <div class="flex items-center gap-3"><i class="ph-fill ph-check-circle text-green-500"></i> C√≥ th·ªÉ l√†m
                    l·∫°i b·∫•t c·ª© l√∫c n√†o</div>
            </div>
            <button onclick="startAssessment()"
                class="hero-gradient text-white px-10 py-4 rounded-xl font-black uppercase tracking-widest text-sm shadow-xl hover:scale-105 transition-transform">B·∫Øt
                ƒë·∫ßu ƒë√°nh gi√° <i class="ph-bold ph-arrow-right ml-2"></i></button>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="screen-quiz" class="hidden max-w-3xl mx-auto px-4 mt-12">
        <!-- Progress -->
        <div class="glass-card p-4 rounded-2xl mb-8">
            <div class="flex justify-between items-center mb-2">
                <span class="text-xs font-bold text-gray-500">C√¢u <span id="q-current">1</span> / <span
                        id="q-total">20</span></span>
                <span id="q-group"
                    class="text-[9px] uppercase font-black text-ns-purple bg-ns-purple/10 px-2 py-0.5 rounded-full"></span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2">
                <div id="progress-bar" class="h-2 rounded-full bg-ns-purple transition-all duration-300"
                    style="width:0%"></div>
            </div>
        </div>
        <!-- Question -->
        <div class="glass-card p-8 sm:p-10 rounded-[2.5rem]">
            <h2 id="q-text" class="text-xl font-bold dark:text-white mb-6 leading-relaxed"></h2>
            <div id="q-options" class="space-y-3"></div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="screen-result" class="hidden max-w-5xl mx-auto px-4 mt-12 space-y-8">
        <div class="glass-card p-10 rounded-[3rem] text-center">
            <i class="ph-fill ph-chart-polar text-6xl text-ns-purple mb-4"></i>
            <h2 class="text-3xl font-extrabold dark:text-white mb-2">K·∫øt Qu·∫£ ƒê√°nh Gi√°</h2>
            <p class="text-gray-500 mb-8">D·ª±a tr√™n c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n, ƒë√¢y l√† ph√¢n t√≠ch chi ti·∫øt:</p>
            <div class="max-w-lg mx-auto mb-8"><canvas id="radar-chart"></canvas></div>
        </div>
        <!-- Scores Detail -->
        <div id="scores-detail" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
        <!-- Recommendations -->
        <div id="recommendations" class="glass-card p-8 rounded-[2.5rem]"></div>
        <!-- Actions -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <button onclick="exportResult()"
                class="bg-white dark:bg-slate-800 text-ns-purple border-2 border-ns-purple px-6 py-3 rounded-xl font-bold hover:bg-purple-50 transition-all"><i
                    class="ph-bold ph-download-simple mr-2"></i>Xu·∫•t JSON</button>
            <button onclick="resetAssessment()"
                class="bg-white dark:bg-slate-800 text-gray-500 border-2 border-gray-300 px-6 py-3 rounded-xl font-bold hover:bg-gray-50 transition-all"><i
                    class="ph-bold ph-arrow-counter-clockwise mr-2"></i>L√†m l·∫°i</button>
            <a href="giaiphap.html"
                class="hero-gradient text-white px-6 py-3 rounded-xl font-bold shadow-xl text-center">Xem gi·∫£i ph√°p ph√π
                h·ª£p <i class="ph-bold ph-arrow-right ml-1"></i></a>
        </div>
    </div>

    <footer class="text-center mt-24 text-gray-400 dark:text-gray-600 text-sm pb-10">
        <div class="flex justify-center items-center gap-2 mb-4"><i
                class="ph-fill ph-sparkle text-2xl text-ns-purple"></i><span
                class="font-bold text-slate-800 dark:text-white uppercase tracking-wider">Nova Spark</span></div>
        <p>D√†nh cho h·ªçc sinh THPT Vi·ªát Nam ‚Äî 2026</p>
    </footer>

    <script>
        const QUESTIONS = [
            // L·∫≠p k·∫ø ho·∫°ch (Planning)
            { text: 'Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu h·ªçc m·ªôt ch·ªß ƒë·ªÅ m·ªõi, em th∆∞·ªùng l√†m g√¨?', group: 'planning', options: ['B·∫Øt ƒë·∫ßu ngay theo SGK', 'L∆∞·ªõt qua m·ª•c l·ª•c ƒë·ªÉ c√≥ c√°i nh√¨n t·ªïng quan', 'L·∫≠p k·∫ø ho·∫°ch c·ª• th·ªÉ v·ªõi m·ª•c ti√™u r√µ r√†ng', 'T√¨m hi·ªÉu k·ªπ: xem video intro, ƒë·∫∑t c√¢u h·ªèi, li√™n h·ªá b√†i c≈©'] },
            { text: 'Em ƒë·∫∑t m·ª•c ti√™u h·ªçc t·∫≠p nh∆∞ th·∫ø n√†o?', group: 'planning', options: ['Ch∆∞a ƒë·∫∑t m·ª•c ti√™u c·ª• th·ªÉ', 'ƒê·∫∑t m·ª•c ti√™u chung chung (VD: "h·ªçc gi·ªèi h∆°n")', 'ƒê·∫∑t m·ª•c ti√™u theo tu·∫ßn/th√°ng', 'D√πng m√¥ h√¨nh SMART: c·ª• th·ªÉ, ƒëo l∆∞·ªùng, th·ªùi h·∫°n'] },
            { text: 'Khi c√≥ b√†i ki·ªÉm tra quan tr·ªçng, em th∆∞·ªùng √¥n t·∫≠p th·∫ø n√†o?', group: 'planning', options: ['√în ngay ƒë√™m tr∆∞·ªõc (cram)', '√în 2-3 ng√†y tr∆∞·ªõc', '√în r·∫£i ƒë·ªÅu trong tu·∫ßn, c√≥ l·ªãch c·ª• th·ªÉ', 'D√πng Spaced Repetition: √¥n theo kho·∫£ng c√°ch tƒÉng d·∫ßn'] },

            // T·ª± ch·ªß (Autonomy)
            { text: 'Khi g·∫∑p b√†i t·∫≠p kh√≥ m√† kh√¥ng gi·∫£i ƒë∆∞·ª£c, em th∆∞·ªùng:', group: 'autonomy', options: ['B·ªè qua, ch·ªù th·∫ßy/c√¥ ch·ªØa', 'H·ªèi b·∫°n b√® ngay l·∫≠p t·ª©c', 'Th·ª≠ nhi·ªÅu c√°ch kh√°c nhau tr∆∞·ªõc khi h·ªèi', 'Ph√¢n t√≠ch xem b·ªã t·∫Øc ·ªü ƒë√¢u, t√¨m t√†i li·ªáu b·ªï tr·ª£, r·ªìi m·ªõi h·ªèi'] },
            { text: 'Em s·ª≠ d·ª•ng AI (ChatGPT, Gemini...) trong h·ªçc t·∫≠p th·∫ø n√†o?', group: 'autonomy', options: ['Ch∆∞a d√πng / Kh√¥ng bi·∫øt c√°ch d√πng', 'D√πng ƒë·ªÉ tra l·ªùi gi·∫£i/ƒë√°p √°n', 'D√πng ƒë·ªÉ gi·∫£i th√≠ch kh√°i ni·ªám kh√≥ hi·ªÉu', 'D√πng nh∆∞ "gia s∆∞": h·ªèi g·ª£i √Ω, ki·ªÉm ch·ª©ng, t·ª± l√†m tr∆∞·ªõc r·ªìi so s√°nh'] },
            { text: 'H√†ng ng√†y em d√†nh bao nhi√™u th·ªùi gian cho t·ª± h·ªçc (ngo√†i b√†i tr√™n l·ªõp)?', group: 'autonomy', options: ['H·∫ßu nh∆∞ kh√¥ng', 'Kho·∫£ng 30 ph√∫t', '1‚Äì2 ti·∫øng c√≥ k·∫ø ho·∫°ch', '2 ti·∫øng tr·ªü l√™n, c√≥ ∆∞u ti√™n r√µ r√†ng v√† theo d√µi ti·∫øn tr√¨nh'] },

            // Si√™u nh·∫≠n th·ª©c (Metacognition)
            { text: 'Sau khi h·ªçc xong m·ªôt ph·∫ßn, em c√≥ ƒë√°nh gi√° l·∫°i kh√¥ng?', group: 'metacognition', options: ['Kh√¥ng, h·ªçc xong l√† xong', 'Th·ªânh tho·∫£ng xem l·∫°i v·ªü', 'T·ª± ki·ªÉm tra b·∫±ng c√¢u h·ªèi/flashcard', 'ƒê√°nh gi√°: m√¨nh hi·ªÉu ƒë∆∞·ª£c g√¨, ch∆∞a hi·ªÉu g√¨, c·∫ßn √¥n l·∫°i ph·∫ßn n√†o'] },
            { text: 'Khi nh·∫≠n ra m√¨nh h·ªçc sai ph∆∞∆°ng ph√°p (VD: ƒë·ªçc ƒëi ƒë·ªçc l·∫°i kh√¥ng nh·ªõ), em:', group: 'metacognition', options: ['V·∫´n ti·∫øp t·ª•c v√¨ quen', 'Bi·∫øt nh∆∞ng ch∆∞a thay ƒë·ªïi', 'T√¨m ph∆∞∆°ng ph√°p m·ªõi (VD: Active Recall)', 'Th·ª≠ nghi·ªám nhi·ªÅu c√°ch, so s√°nh, ch·ªçn c√°ch ph√π h·ª£p nh·∫•t v·ªõi m√¨nh'] },
            { text: 'Em c√≥ th√≥i quen ghi ch√∫ b·∫±ng l·ªùi ri√™ng thay v√¨ ch√©p nguy√™n vƒÉn kh√¥ng?', group: 'metacognition', options: ['Lu√¥n ch√©p nguy√™n vƒÉn', 'Ch·ªß y·∫øu ch√©p, ƒë√¥i khi vi·∫øt th√™m', 'Th∆∞·ªùng t√≥m t·∫Øt b·∫±ng l·ªùi ri√™ng', 'D√πng k·ªπ thu·∫≠t Cornell/Sketchnote: ghi ch√∫ + c√¢u h·ªèi + t√≥m t·∫Øt'] },

            // T∆∞ duy ph·∫£n bi·ªán (Critical Thinking)
            { text: 'Khi ƒë·ªçc m·ªôt th√¥ng tin tr√™n m·∫°ng, em th∆∞·ªùng:', group: 'critical_thinking', options: ['Tin lu√¥n n·∫øu nghe h·ª£p l√Ω', 'ƒê·ªçc th√™m v√†i ngu·ªìn n·ªØa', 'Ki·ªÉm tra ngu·ªìn g·ªëc (ai vi·∫øt, c√≥ d·∫´n ch·ª©ng kh√¥ng?)', 'ƒê√°nh gi√° ph∆∞∆°ng ph√°p, d·ªØ li·ªáu, so s√°nh v·ªõi ngu·ªìn h·ªçc thu·∫≠t'] },
            { text: 'Khi th·∫ßy/c√¥ gi·∫£ng m·ªôt c√¥ng th·ª©c/quy t·∫Øc, em th∆∞·ªùng:', group: 'critical_thinking', options: ['Ghi l·∫°i v√† h·ªçc thu·ªôc', 'H·ªèi v√≠ d·ª• ƒë·ªÉ hi·ªÉu r√µ h∆°n', 'T·ª± t√¨m hi·ªÉu t·∫°i sao c√¥ng th·ª©c ƒë√∫ng', 'T·ª± ch·ª©ng minh/suy lu·∫≠n l·∫°i, t√¨m gi·ªõi h·∫°n √°p d·ª•ng'] },
            { text: 'Em c√≥ bao gi·ªù tranh lu·∫≠n (l·ªãch s·ª±) v·ªõi th·∫ßy c√¥ ho·∫∑c b·∫°n b√® v·ªÅ ki·∫øn th·ª©c kh√¥ng?', group: 'critical_thinking', options: ['Kh√¥ng bao gi·ªù', 'Hi·∫øm khi, ng·∫°i n√≥i', 'Th·ªânh tho·∫£ng khi c√≥ √Ω ki·∫øn kh√°c', 'Th∆∞·ªùng xuy√™n ‚Äî m√¨nh th·∫•y tranh lu·∫≠n gi√∫p hi·ªÉu s√¢u h∆°n'] },

            // AI Literacy
            { text: 'Em hi·ªÉu th·∫ø n√†o v·ªÅ c√°ch ho·∫°t ƒë·ªông c·ªßa AI (ChatGPT, Gemini...)?', group: 'ai_literacy', options: ['Kh√¥ng bi·∫øt', 'Bi·∫øt n√≥ tr·∫£ l·ªùi c√¢u h·ªèi nh∆∞ng kh√¥ng r√µ c∆° ch·∫ø', 'Hi·ªÉu c∆° b·∫£n: n√≥ d·ª± ƒëo√°n t·ª´ ti·∫øp theo d·ª±a tr√™n d·ªØ li·ªáu', 'Hi·ªÉu r√µ: strengths/limitations, c√≥ th·ªÉ hallucinate, c·∫ßn ki·ªÉm ch·ª©ng'] },
            { text: 'Khi AI cho em m·ªôt l·ªùi gi·∫£i, em:', group: 'ai_literacy', options: ['Copy nguy√™n vƒÉn', 'ƒê·ªçc hi·ªÉu r·ªìi d√πng', 'Ki·ªÉm tra l·∫°i b·∫±ng c√°ch gi·∫£i th·ªß c√¥ng', 'So s√°nh nhi·ªÅu ngu·ªìn, ƒë√°nh gi√° logic, ch·ªâ d√πng khi ƒë√£ x√°c minh'] },

            // Ki√™n tr√¨ (Perseverance)
            { text: 'Khi ƒëi·ªÉm ki·ªÉm tra th·∫•p h∆°n k·ª≥ v·ªçng, em th∆∞·ªùng:', group: 'perseverance', options: ['Bu·ªìn ch√°n, m·∫•t ƒë·ªông l·ª±c', 'C·ªë g·∫Øng h∆°n nh∆∞ng kh√¥ng bi·∫øt c√°ch', 'Ph√¢n t√≠ch b√†i sai, r√∫t kinh nghi·ªám c·ª• th·ªÉ', 'Xem ƒë√≥ l√† ph·∫£n h·ªìi, ƒëi·ªÅu ch·ªânh ph∆∞∆°ng ph√°p, ƒë·∫∑t m·ª•c ti√™u m·ªõi'] },
            { text: 'Em c√≥ th·ªÉ t·∫≠p trung h·ªçc li√™n t·ª•c bao l√¢u?', group: 'perseverance', options: ['D∆∞·ªõi 15 ph√∫t', '15‚Äì30 ph√∫t', '30‚Äì45 ph√∫t (Pomodoro 1 phi√™n)', '45 ph√∫t tr·ªü l√™n, bi·∫øt ngh·ªâ ƒë√∫ng l√∫c'] },

            // Qu·∫£n l√Ω th·ªùi gian (Time Management)
            { text: 'Em qu·∫£n l√Ω th·ªùi gian h·ªçc t·∫≠p b·∫±ng c√°ch n√†o?', group: 'time_management', options: ['Kh√¥ng qu·∫£n l√Ω, h·ªçc khi n√†o r·∫£nh', 'Ghi nh·ªõ trong ƒë·∫ßu', 'D√πng to-do list / l·ªãch gi·∫•y', 'D√πng ·ª©ng d·ª•ng (Notion, Google Calendar...) k·∫øt h·ª£p review tu·∫ßn'] },
            { text: 'Khi c√≥ nhi·ªÅu b√†i c·∫ßn l√†m c√πng l√∫c, em ∆∞u ti√™n th·∫ø n√†o?', group: 'time_management', options: ['L√†m b√†i n√†o d·ªÖ tr∆∞·ªõc', 'L√†m b√†i n√†o g·∫ßn deadline nh·∫•t', 'X·∫øp theo ƒë·ªô quan tr·ªçng + deadline', 'D√πng ma tr·∫≠n Eisenhower ho·∫∑c ph∆∞∆°ng ph√°p t∆∞∆°ng t·ª±'] },
            { text: 'Em c√≥ d√†nh th·ªùi gian cu·ªëi tu·∫ßn ƒë·ªÉ review l·∫°i nh·ªØng g√¨ ƒë√£ h·ªçc kh√¥ng?', group: 'time_management', options: ['Kh√¥ng', 'Th·ªânh tho·∫£ng', 'C√≥, xem l·∫°i v·ªü/ghi ch√∫', 'C√≥ h·ªá th·ªëng: review + ƒë·∫∑t m·ª•c ti√™u tu·∫ßn m·ªõi + ƒëi·ªÅu ch·ªânh k·∫ø ho·∫°ch'] },
        ];

        const GROUP_LABELS = {
            planning: 'L·∫≠p k·∫ø ho·∫°ch',
            autonomy: 'T√≠nh t·ª± ch·ªß',
            metacognition: 'Si√™u nh·∫≠n th·ª©c',
            critical_thinking: 'T∆∞ duy ph·∫£n bi·ªán',
            ai_literacy: 'NƒÉng l·ª±c AI',
            perseverance: 'Ki√™n tr√¨ & T·∫≠p trung',
            time_management: 'Qu·∫£n l√Ω th·ªùi gian'
        };

        const GROUP_COLORS = {
            planning: '#7c5cfc', autonomy: '#38bdf8', metacognition: '#34d399',
            critical_thinking: '#fb923c', ai_literacy: '#f472b6', perseverance: '#a78bfa', time_management: '#fbbf24'
        };

        const GROUP_RECS = {
            planning: { low: 'B·∫Øt ƒë·∫ßu v·ªõi m·ª•c ti√™u SMART nh·ªè: m·ªói tu·∫ßn ch·ªçn 1 m√¥n, ƒë·∫∑t 1 m·ª•c ti√™u c·ª• th·ªÉ. Th·ª≠ d√πng Study Planner c·ªßa Nova Spark.', high: 'Tuy·ªát v·ªùi! B·∫°n c√≥ n·ªÅn t·∫£ng l·∫≠p k·∫ø ho·∫°ch t·ªët. Th·ª≠ th√™m ph∆∞∆°ng ph√°p Spaced Repetition ƒë·ªÉ √¥n t·∫≠p hi·ªáu qu·∫£ h∆°n.' },
            autonomy: { low: 'Th·ª≠ quy t·∫Øc "5 ph√∫t": g·∫∑p b√†i kh√≥ ‚Üí t·ª± t√¨m c√°ch trong 5 ph√∫t tr∆∞·ªõc khi h·ªèi. D√πng AI l√†m "gia s∆∞ g·ª£i √Ω" thay v√¨ "m√°y cho ƒë√°p √°n".', high: 'B·∫°n r·∫•t t·ª± ch·ªß! H√£y chia s·∫ª c√°ch h·ªçc c·ªßa m√¨nh v·ªõi b·∫°n b√® ‚Äî theo Th√°p H·ªçc T·∫≠p, d·∫°y l·∫°i gi√∫p ghi nh·ªõ 90%.' },
            metacognition: { low: 'Sau m·ªói bu·ªïi h·ªçc, vi·∫øt 3 d√≤ng: "H√¥m nay m√¨nh hi·ªÉu ƒë∆∞·ª£c g√¨?" + "Ch∆∞a hi·ªÉu g√¨?" + "C·∫ßn √¥n l·∫°i ph·∫ßn n√†o?". Th·ª≠ ghi ch√∫ Cornell.', high: 'NƒÉng l·ª±c t·ª± ƒë√°nh gi√° c·ªßa b·∫°n r·∫•t t·ªët. H√£y th·ª≠ k·ªπ thu·∫≠t Feynman: gi·∫£ng l·∫°i cho ng∆∞·ªùi kh√°c b·∫±ng l·ªùi ƒë∆°n gi·∫£n.' },
            critical_thinking: { low: 'Khi ƒë·ªçc th√¥ng tin m·ªõi, t·∫≠p th√≥i quen h·ªèi: "Ai n√≥i ƒëi·ªÅu n√†y? C√≥ d·∫´n ch·ª©ng kh√¥ng? C√≥ ngu·ªìn ng∆∞·ª£c l·∫°i kh√¥ng?". Th·ª≠ ph∆∞∆°ng ph√°p SQ3R.', high: 'T∆∞ duy ph·∫£n bi·ªán c·ªßa b·∫°n n·ªïi b·∫≠t! H√£y √°p d·ª•ng v√†o vi·ªác ƒë√°nh gi√° ngu·ªìn t√†i li·ªáu online v√† k·∫øt qu·∫£ AI.' },
            ai_literacy: { low: 'H√£y xem AI nh∆∞ "chi·∫øc m√°y t√≠nh th√¥ng minh" ‚Äî n√≥ gi·ªèi t·ªïng h·ª£p nh∆∞ng c√≥ th·ªÉ sai. Lu√¥n ki·ªÉm ch·ª©ng k·∫øt qu·∫£ AI v·ªõi SGK ho·∫∑c ngu·ªìn uy t√≠n.', high: 'B·∫°n s·ª≠ d·ª•ng AI r·∫•t th√¥ng minh! H√£y chia s·∫ª kinh nghi·ªám n√†y v·ªõi b·∫°n b√® ƒë·ªÉ gi√∫p m·ªçi ng∆∞·ªùi d√πng AI hi·ªáu qu·∫£.' },
            perseverance: { low: 'Th·ª≠ Pomodoro: 25 ph√∫t t·∫≠p trung ‚Üí 5 ph√∫t ngh·ªâ. B·∫Øt ƒë·∫ßu nh·ªè (1 phi√™n/ng√†y), tƒÉng d·∫ßn. Xem ƒëi·ªÉm th·∫•p l√† "ch·∫©n ƒëo√°n b·ªánh" ch·ª© kh√¥ng ph·∫£i "b·∫£n √°n".', high: 'S·ª©c b·ªÅn v√† t·∫≠p trung c·ªßa b·∫°n r·∫•t t·ªët. H√£y k·∫øt h·ª£p v·ªõi k·ªπ thu·∫≠t Interleaving ƒë·ªÉ tƒÉng hi·ªáu qu·∫£.' },
            time_management: { low: 'B·∫Øt ƒë·∫ßu b·∫±ng 1 vi·ªác ƒë∆°n gi·∫£n: m·ªói t·ªëi ghi ra 3 vi·ªác c·∫ßn l√†m ng√†y mai, x·∫øp theo ∆∞u ti√™n. D√πng Study Planner c·ªßa Nova Spark.', high: 'Qu·∫£n l√Ω th·ªùi gian xu·∫•t s·∫Øc! H√£y th·ª≠ ph∆∞∆°ng ph√°p "Time Boxing" ‚Äî ƒë·∫∑t khung gi·ªù c·ªë ƒë·ªãnh cho t·ª´ng ho·∫°t ƒë·ªông.' }
        };

        let currentQ = 0;
        let answers = [];
        let radarChart = null;

        // Check saved state
        const saved = localStorage.getItem('ns_assessment');
        if (saved) {
            try {
                const data = JSON.parse(saved);
                if (data.answers && data.answers.length === QUESTIONS.length) {
                    answers = data.answers;
                    showResult();
                }
            } catch (e) { }
        }

        function startAssessment() {
            currentQ = 0; answers = [];
            document.getElementById('screen-intro').classList.add('hidden');
            document.getElementById('screen-result').classList.add('hidden');
            document.getElementById('screen-quiz').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = QUESTIONS[currentQ];
            document.getElementById('q-current').textContent = currentQ + 1;
            document.getElementById('q-total').textContent = QUESTIONS.length;
            document.getElementById('q-group').textContent = GROUP_LABELS[q.group];
            document.getElementById('q-text').textContent = q.text;
            document.getElementById('progress-bar').style.width = ((currentQ / QUESTIONS.length) * 100) + '%';
            const optDiv = document.getElementById('q-options');
            optDiv.innerHTML = q.options.map((opt, i) => `
        <button onclick="answerQuestion(${i + 1})" class="w-full text-left p-4 rounded-2xl border-2 border-gray-200 dark:border-slate-700 hover:border-ns-purple dark:hover:border-ns-purple transition-all flex items-start gap-3 group">
          <span class="w-8 h-8 rounded-xl bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-gray-500 group-hover:bg-ns-purple group-hover:text-white transition-all shrink-0">${i + 1}</span>
          <span class="text-sm font-semibold dark:text-gray-200">${opt}</span>
        </button>
      `).join('');
        }

        function answerQuestion(score) {
            answers.push({ question: currentQ, group: QUESTIONS[currentQ].group, score: score });
            currentQ++;
            if (currentQ >= QUESTIONS.length) {
                localStorage.setItem('ns_assessment', JSON.stringify({ answers: answers, timestamp: new Date().toISOString() }));
                showResult();
            } else {
                showQuestion();
            }
        }

        function showResult() {
            document.getElementById('screen-intro').classList.add('hidden');
            document.getElementById('screen-quiz').classList.add('hidden');
            document.getElementById('screen-result').classList.remove('hidden');

            // Calculate scores per group (1-4 scale ‚Üí 0-100)
            const groups = {};
            answers.forEach(a => {
                if (!groups[a.group]) groups[a.group] = { total: 0, count: 0 };
                groups[a.group].total += a.score;
                groups[a.group].count++;
            });
            const scores = {};
            for (const g in groups) { scores[g] = Math.round(((groups[g].total / groups[g].count) - 1) / 3 * 100) }

            // Radar Chart
            const labels = Object.keys(scores).map(k => GROUP_LABELS[k]);
            const data = Object.values(scores);
            const ctx = document.getElementById('radar-chart').getContext('2d');
            if (radarChart) radarChart.destroy();
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: { labels: labels, datasets: [{ label: 'ƒêi·ªÉm nƒÉng l·ª±c', data: data, backgroundColor: 'rgba(124,92,252,0.2)', borderColor: '#7c5cfc', borderWidth: 2, pointBackgroundColor: '#7c5cfc', pointRadius: 5 }] },
                options: {
                    responsive: true,
                    scales: { r: { beginAtZero: true, max: 100, ticks: { stepSize: 20, display: false }, pointLabels: { font: { size: 12, family: 'Quicksand', weight: 'bold' } }, grid: { color: 'rgba(124,92,252,0.1)' } } },
                    plugins: { legend: { display: false } }
                }
            });

            // Scores detail
            const detailHTML = Object.entries(scores).map(([k, v]) => {
                const color = GROUP_COLORS[k];
                const level = v >= 75 ? 'T·ªët' : v >= 50 ? 'Kh√°' : v >= 25 ? 'Trung b√¨nh' : 'C·∫ßn c·∫£i thi·ªán';
                const emoji = v >= 75 ? 'üåü' : v >= 50 ? 'üëç' : v >= 25 ? 'üìö' : 'üí™';
                return `<div class="glass-card p-6 rounded-[2rem]">
          <div class="flex items-center gap-3 mb-3">
            <div class="w-10 h-10 rounded-xl flex items-center justify-center text-white text-lg" style="background:${color}">${emoji}</div>
            <div>
              <h3 class="font-bold dark:text-white">${GROUP_LABELS[k]}</h3>
              <span class="text-xs font-bold" style="color:${color}">${level} ‚Äî ${v}/100</span>
            </div>
          </div>
          <div class="w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2"><div class="h-2 rounded-full transition-all" style="width:${v}%;background:${color}"></div></div>
        </div>`;
            }).join('');
            document.getElementById('scores-detail').innerHTML = detailHTML;

            // Recommendations
            const sorted = Object.entries(scores).sort((a, b) => a[1] - b[1]);
            const weakest = sorted.slice(0, 2);
            const strongest = sorted.slice(-2);
            let recHTML = `<h2 class="text-2xl font-bold dark:text-white mb-6 flex items-center gap-2"><i class="ph-fill ph-lightbulb text-ns-purple"></i> G·ª£i √ù C√° Nh√¢n H√≥a</h2>`;
            recHTML += `<div class="space-y-4">`;
            recHTML += `<h3 class="font-bold text-sm uppercase tracking-wider text-gray-400 mb-2">üí™ C·∫ßn ph√°t tri·ªÉn th√™m:</h3>`;
            weakest.forEach(([k, v]) => {
                recHTML += `<div class="p-4 rounded-2xl bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800">
          <div class="font-bold text-orange-700 dark:text-orange-300 mb-1">${GROUP_LABELS[k]} (${v}/100)</div>
          <p class="text-sm text-orange-600 dark:text-orange-400">${GROUP_RECS[k].low}</p>
        </div>`;
            });
            recHTML += `<h3 class="font-bold text-sm uppercase tracking-wider text-gray-400 mb-2 mt-6">üåü ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n:</h3>`;
            strongest.forEach(([k, v]) => {
                recHTML += `<div class="p-4 rounded-2xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800">
          <div class="font-bold text-green-700 dark:text-green-300 mb-1">${GROUP_LABELS[k]} (${v}/100)</div>
          <p class="text-sm text-green-600 dark:text-green-400">${GROUP_RECS[k].high}</p>
        </div>`;
            });
            recHTML += `</div>`;
            document.getElementById('recommendations').innerHTML = recHTML;
        }

        function exportResult() {
            const data = { answers: answers, timestamp: new Date().toISOString(), project: 'Nova Spark Assessment' };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
            a.download = `nova-spark-assessment-${new Date().toISOString().slice(0, 10)}.json`; a.click();
        }

        function resetAssessment() {
            if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën l√†m l·∫°i? K·∫øt qu·∫£ hi·ªán t·∫°i s·∫Ω b·ªã x√≥a.')) return;
            localStorage.removeItem('ns_assessment');
            answers = []; currentQ = 0;
            document.getElementById('screen-result').classList.add('hidden');
            document.getElementById('screen-quiz').classList.add('hidden');
            document.getElementById('screen-intro').classList.remove('hidden');
        }
    </script>
</body>

</html>